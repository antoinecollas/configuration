# Skip for non-interactive shells (rsync/scp/ssh commands)
if [ -z "$PS1" ]; then
  return 0 2>/dev/null || exit 0
fi

# User configuration

# openblas
export OPENBLAS_NUM_THREADS=1 
export MKL_NUM_THREADS=1
export NUMEXPR_NUM_THREADS=1
export OMP_NUM_THREADS=1

export TORCHINDUCTOR_CACHE_DIR=$WORK/torchinductor_cache

# ll command
alias ll='ls -alh'

# Modules
module purge
module load arch/h100
module load pytorch-gpu/py3/2.7.0

# Working dir + banner
TARGET="$WORK/karavela/decoding-nsd"
[[ -d "$TARGET" ]] && cd "$TARGET"
echo "Connected on node $(hostname -s) at $(pwd)"

# Add $HOME/.local/bin to PATH
export PATH="$HOME/.local/bin:$PATH"
