# ~/.codex/rules/default.rules
# Starlark (Python-like). Rules are prefix matches.

# --- Python workflow ---
prefix_rule(pattern=["uv"], decision="allow")
prefix_rule(pattern=["ruff"], decision="allow")
prefix_rule(pattern=["pre-commit"], decision="allow")
prefix_rule(pattern=["pytest"], decision="allow")
prefix_rule(pattern=["python", "-m", "pytest"], decision="allow")

# --- Git workflow (allow everything you listed) ---
prefix_rule(pattern=["git", "status"], decision="allow")
prefix_rule(pattern=["git", "diff"], decision="allow")
prefix_rule(pattern=["git", "add"], decision="allow")
prefix_rule(pattern=["git", "restore"], decision="allow")
prefix_rule(pattern=["git", "checkout"], decision="allow")
prefix_rule(pattern=["git", "switch"], decision="allow")
prefix_rule(pattern=["git", "commit"], decision="allow")
prefix_rule(pattern=["git", "pull"], decision="allow")
prefix_rule(pattern=["git", "fetch"], decision="allow")
prefix_rule(pattern=["git", "update-ref"], decision="allow")
prefix_rule(pattern=["git", "stash"], decision="allow")
prefix_rule(pattern=["git", "mv"], decision="allow")
prefix_rule(pattern=["git", "log"], decision="allow")
prefix_rule(pattern=["git", "branch"], decision="allow")
prefix_rule(pattern=["git", "push"], decision="allow")

# --- GitHub CLI workflow ---
prefix_rule(pattern=["gh", "issue", "view"], decision="allow")
prefix_rule(pattern=["gh", "auth"], decision="allow")
prefix_rule(pattern=["gh", "pr", "view"], decision="allow")
prefix_rule(pattern=["gh", "run", "view"], decision="allow")
prefix_rule(pattern=["gh", "run", "list"], decision="allow")
prefix_rule(pattern=["gh", "release", "view"], decision="allow")
prefix_rule(pattern=["gh", "pr", "checks"], decision="allow")
prefix_rule(pattern=["gh", "pr", "create"], decision="prompt")

# --- Prisma ---
prefix_rule(pattern=["npx", "prisma", "validate"], decision="allow")
prefix_rule(pattern=["npx", "prisma", "format"], decision="allow")

# --- Docker ---
prefix_rule(pattern=["docker", "run"], decision="allow")
prefix_rule(pattern=["docker", "build"], decision="allow")
prefix_rule(pattern=["docker", "pull"], decision="allow")
prefix_rule(pattern=["docker", "rm"], decision="allow")
